## Raw Concept
**Task:**
Document the per-product image asset management system

**Files:**
- src/images/index.ts
- src/images/types.ts

**Flow:**
Image Source (File/URL) -> addImage -> Download/Copy -> Detect Dimensions -> Store Metadata -> embed(text) -> Vectra Index -> Searchable Image

**Timestamp:** 2026-02-23

## Narrative
### Structure
The Image Library (src/images/index.ts) manages visual assets on a per-product basis. Images are stored in `~/.marketclaw/workspace/products/{productId}/images/` with metadata in `images.json` and vector embeddings in a `vectors/` sub-directory.

### Features
Local storage, semantic search via Vectra and OpenAI embeddings, automatic dimension detection, support for multiple image types (logo, screenshot, hero, etc.), and file/URL import.

### Rules
1. All product images are assigned a unique `img_` ID.
2. Semantic search uses the `text-embedding-3-small` model.
3. Searchable text is generated by combining the image name, description, tags, and type.
4. Supported formats include PNG, JPG, GIF, WEBP, SVG, BMP, and ICO.

### Examples
Image Types:
- screenshot
- logo
- icon
- hero
- social
- product-shot
- banner
- thumbnail
- other
